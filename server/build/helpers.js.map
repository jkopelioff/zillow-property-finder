{"version":3,"sources":["../src/helpers.js"],"names":["getMessageCodeText","getPropertyInfo","raw_object","results","getLinks","links","ret_array","key","push","getAddress","address","getCurrency","currency","getValuationRange","valuationRange","getZestimate","zestimate","getLocalRealEstate","localRealEstate","region","property","zpid"],"mappings":";;;;;QAAgBA,kB,GAAAA,kB;QAsEAC,e,GAAAA,e;AAtET,SAASD,kBAAT,CAA4BE,UAA5B,EAAuC;AAC5C;AACA,MAAMC,UAAUD,WAAW,6BAAX,CAAhB;AACA,MAAIC,WAAW,WAAX,IAA0BA,QAAQ,SAAR,KAAsB,WAApD,EAAgE;AAC5D,WAAO,EAAC,QAAQA,QAAQ,SAAR,EAAmB,CAAnB,EAAsB,MAAtB,EAA8B,CAA9B,CAAT;AACC,iBAAWA,QAAQ,SAAR,EAAmB,CAAnB,EAAsB,MAAtB,EAA8B,CAA9B,CADZ,EAAP;AAEH;AACD,SAAO,IAAP;AACD;;AAED;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,MAAMC,YAAY,EAAlB;AACA,OAAK,IAAIC,GAAT,IAAgBF,KAAhB,EAAuB;AACrBC,cAAUE,IAAV,CAAe,EAAC,QAAQD,GAAT,EAAc,OAAOF,MAAME,GAAN,EAAW,CAAX,CAArB,EAAf;AACD;AACD,SAAOD,SAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,OAApB,EAA6B;AAC3B,SAAO;AACL,cAAUA,QAAQ,QAAR,EAAkB,CAAlB,CADL;AAEL,eAAWA,QAAQ,SAAR,EAAmB,CAAnB,CAFN;AAGL,YAAQA,QAAQ,MAAR,EAAgB,CAAhB,CAHH;AAIL,aAASA,QAAQ,OAAR,EAAiB,CAAjB,CAJJ;AAKL,gBAAYA,QAAQ,UAAR,EAAoB,CAApB,CALP;AAML,iBAAaA,QAAQ,WAAR,EAAqB,CAArB;AANR,GAAP;AAQD;;AAED,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAC7B,SAAO,EAAC,SAASA,SAAS,GAAT,CAAV;AACP,YAAQA,SAAS,GAAT,EAAc,UAAd,CADD,EAAP;AAED;;AAED,SAASC,iBAAT,CAA2BC,cAA3B,EAA2C;AACzC,SAAO;AACL,WAAOH,YAAYG,eAAe,KAAf,EAAsB,CAAtB,CAAZ,CADF;AAEL,YAAQH,YAAYG,eAAe,MAAf,EAAuB,CAAvB,CAAZ;AAFH,GAAP;AAID;;AAGD,SAASC,YAAT,CAAsBC,SAAtB,EAAiC;AAC/B,SAAO;AACL,cAAUL,YAAYK,UAAU,QAAV,EAAoB,CAApB,CAAZ,CADL;AAEL,mBAAeA,UAAU,cAAV,EAA0B,CAA1B,CAFV;AAGL,mBAAeL,YAAYK,UAAU,aAAV,EAAyB,CAAzB,CAAZ,CAHV;AAIL,2BAAuBA,UAAU,aAAV,EAAyB,CAAzB,EAA4B,GAA5B,EAAiC,UAAjC,CAJlB;AAKL,sBAAkBH,kBAAkBG,UAAU,gBAAV,EAA4B,CAA5B,CAAlB,CALb;AAML,kBAAcA,UAAU,YAAV,KAA2B;AANpC,GAAP;AAQD;;AAED,SAASC,kBAAT,CAA4BC,eAA5B,EAA6C;AAC3C,MAAMC,SAASD,gBAAgB,QAAhB,EAA0B,CAA1B,CAAf;;AAEA,SAAO;AACC,cAAU;AACR,cAAQC,OAAO,GAAP,EAAY,MAAZ,CADA;AAER,YAAMA,OAAO,GAAP,EAAY,IAAZ,CAFE;AAGR,cAAQA,OAAO,GAAP,EAAY,MAAZ,CAHA;AAIR,qBAAeA,OAAO,aAAP,EAAsB,CAAtB,CAJP;AAKR,eAASf,SAASe,OAAO,OAAP,EAAgB,CAAhB,CAAT;AALD;AADX,GAAP;AASD;;AAED;AACO,SAASlB,eAAT,CAAyBC,UAAzB,EAAqC;AAC1C,MAAMC,UAAUD,WAAW,6BAAX,CAAhB;AACA,MAAMkB,WAAWjB,QAAQ,UAAR,EAAoB,CAApB,EAAuB,SAAvB,EAAkC,CAAlC,EAAqC,QAArC,EAA+C,CAA/C,CAAjB;AACA,MAAMkB,OAAOD,SAAS,MAAT,EAAiB,CAAjB,CAAb;AACA,MAAMf,QAAQD,SAASgB,SAAS,OAAT,EAAkB,CAAlB,CAAT,CAAd;AACA,MAAMV,UAAUD,WAAWW,SAAS,SAAT,EAAoB,CAApB,CAAX,CAAhB;AACA,MAAMJ,YAAYD,aAAaK,SAAS,WAAT,EAAsB,CAAtB,CAAb,CAAlB;AACA,MAAMF,kBAAkBD,mBAAmBG,SAAS,iBAAT,EAA4B,CAA5B,CAAnB,CAAxB;;AAEA,SAAO,EAAC,QAAQC,IAAT;AACC,aAAShB,KADV;AAEC,eAAWK,OAFZ;AAGC,iBAAaM,SAHd;AAIC,uBAAmBE;AAJpB,GAAP;AAMD","file":"helpers.js","sourcesContent":["export function getMessageCodeText(raw_object){\n  // I'm making some structural assumptions, would add more error handling\n  const results = raw_object['SearchResults:searchresults']\n  if (results != 'undefined' && results['message'] != 'undefined'){\n      return {'code': results['message'][0]['code'][0], \n              'message': results['message'][0]['text'][0] }\n  }\n  return null\n}\n\n// local functions - small and testable\n\nfunction getLinks(links) {\n  const ret_array = [];\n  for (var key in links) {\n    ret_array.push({'type': key, 'url': links[key][0]});\n  }\n  return ret_array;\n}\n\nfunction getAddress(address) {\n  return {\n    'street': address['street'][0],\n    'zipcode': address['zipcode'][0],\n    'city': address['city'][0],\n    'state': address['state'][0],\n    'latitude': address['latitude'][0],\n    'longitude': address['longitude'][0],\n  }\n}\n\nfunction getCurrency(currency) {\n  return {'value': currency[\"_\"], \n  'type': currency[\"$\"]['currency']}\n}\n\nfunction getValuationRange(valuationRange) {\n  return {\n    'low': getCurrency(valuationRange['low'][0]),\n    'high': getCurrency(valuationRange['high'][0])\n  }\n}\n\n\nfunction getZestimate(zestimate) {\n  return {\n    'amount': getCurrency(zestimate['amount'][0]), \n    'lastUpdated': zestimate['last-updated'][0],\n    'valueChange': getCurrency(zestimate['valueChange'][0]),\n    'valueChangeDuration': zestimate['valueChange'][0][\"$\"]['duration'],\n    'valuationRange': getValuationRange(zestimate['valuationRange'][0]),\n    'percentile': zestimate['percentile'] || 0\n  }\n}\n\nfunction getLocalRealEstate(localRealEstate) {\n  const region = localRealEstate['region'][0]\n\n  return {\n          'region': {\n            'name': region['$']['name'],\n            'id': region['$']['id'],\n            'type': region['$']['type'],\n            'zindexValue': region['zindexValue'][0],\n            'links': getLinks(region['links'][0])\n          }\n        }\n}\n\n// main property function\nexport function getPropertyInfo(raw_object) {\n  const results = raw_object['SearchResults:searchresults'];\n  const property = results['response'][0]['results'][0]['result'][0];\n  const zpid = property['zpid'][0];\n  const links = getLinks(property['links'][0]);\n  const address = getAddress(property['address'][0]);\n  const zestimate = getZestimate(property['zestimate'][0]);\n  const localRealEstate = getLocalRealEstate(property['localRealEstate'][0]);\n\n  return {'zpid': zpid, \n          'links': links, \n          'address': address,\n          'zestimate': zestimate,\n          'localrealestate': localRealEstate\n        }\n}\n"]}